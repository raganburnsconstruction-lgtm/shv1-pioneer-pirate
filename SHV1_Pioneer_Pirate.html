<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHV1 Pioneer Pirate</title>
	<link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3498db">
<style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #a8d8ea 0%, #d4e9f7 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 20px 60px rgba(0,0,0,0.2); overflow: hidden; }
        .header { background: linear-gradient(135deg, #5dade2 0%, #3498db 100%); color: white; padding: 40px 30px; text-align: center; }
        .header h1 { font-size: 2.5em; margin: 0; }
        .content { padding: 30px; }
        .input-section { background: #e8f4f8; padding: 25px; border-radius: 10px; margin-bottom: 30px; border: 2px solid #5dade2; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; color: #2c3e50; }
        input[type="text"], input[type="file"] { width: 100%; padding: 12px; border: 2px solid #5dade2; border-radius: 8px; font-size: 16px; transition: border-color 0.3s; background: white; }
        input[type="text"]:focus, input[type="file"]:focus { outline: none; border-color: #3498db; }
        .btn { background: linear-gradient(135deg, #5dade2 0%, #3498db 100%); color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; width: 100%; margin-bottom: 10px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3); }
        .btn:active { transform: translateY(0); }
        .btn-secondary { background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%); }
        .btn-success { background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%); }
        .results { display: none; margin-top: 30px; }
        .card { background: white; border: 2px solid #d4e9f7; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        .card h3 { color: #3498db; margin-bottom: 15px; font-size: 1.3em; }
        .dip-switch-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .switch-bank { background: #e8f4f8; padding: 15px; border-radius: 8px; border: 2px solid #5dade2; }
        .switch-bank h4 { color: #2c3e50; margin-bottom: 10px; text-align: center; }
        .switch-row { display: flex; justify-content: space-between; align-items: center; padding: 8px; margin: 5px 0; background: white; border-radius: 5px; }
        .switch-position { font-weight: 600; color: #34495e; font-size: 14px; }
        .switch-state { padding: 5px 15px; border-radius: 5px; font-weight: 600; font-size: 14px; }
        .switch-on { background: #2ecc71; color: white; }
        .switch-off { background: #e74c3c; color: white; }
        .specs-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .specs-table td { padding: 12px; border-bottom: 1px solid #d4e9f7; }
        .specs-table td:first-child { font-weight: 600; color: #34495e; width: 40%; }
        .alert { padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .alert-error { background: #fadbd8; border-left: 4px solid #e74c3c; color: #78281f; }
        .alert-success { background: #d5f4e6; border-left: 4px solid #2ecc71; color: #0e6251; }
        .alert-warning { background: #fef5e7; border-left: 4px solid #f39c12; color: #7d6608; }
        .troubleshooting { background: #fef9e7; border-left: 4px solid #f39c12; padding: 20px; border-radius: 8px; margin-top: 20px; }
        .troubleshooting h4 { color: #d68910; margin-bottom: 15px; }
        .blink-code { background: white; padding: 15px; border-radius: 5px; margin: 10px 0; border-left: 3px solid #f39c12; }
        .blink-code strong { color: #d68910; display: block; margin-bottom: 5px; }
        .camera-preview { width: 100%; max-width: 400px; margin: 15px auto; display: block; border-radius: 8px; border: 2px solid #5dade2; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: white; margin: 5% auto; padding: 30px; border-radius: 15px; width: 90%; max-width: 600px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close:hover { color: #000; }
        .loading-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; justify-content: center; align-items: center; }
        .loading-overlay.active { display: flex; }
        .pirate-ship { width: 150px; height: 150px; position: relative; animation: sail 3s ease-in-out infinite; }
        @keyframes sail { 0%, 100% { transform: translateX(-50px) rotate(-5deg); } 50% { transform: translateX(50px) rotate(5deg); } }
        .wave { font-size: 80px; animation: wave 2s ease-in-out infinite; }
        @keyframes wave { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @media print { body { background: white; } .btn, .input-section, .modal { display: none; } }
    </style>
</head>
<body>
    <!-- Loading Overlay with Pirate Ship -->
    <div class="loading-overlay" id="loadingOverlay">
        <div style="text-align: center;">
            <div class="pirate-ship">‚õµ</div>
            <div class="wave">üåä</div>
            <p style="color: white; font-size: 24px; margin-top: 20px;">Ahoy! Loading configuration...</p>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ü¶ú SHV1 Pioneer Pirate</h1>
        </div>

        <div class="content">
            <div class="input-section">
                <h2 style="margin-bottom: 20px; color: #2c3e50;">Asset Lookup</h2>
                <div class="form-group">
                    <label for="assetNumber">Asset Number:</label>
                    <input type="text" id="assetNumber" placeholder="Enter asset number (e.g., 12688, 41830, 63005)">
                </div>
                <div class="form-group">
                    <label for="photoUpload">üì∑ Take/Upload Photo of Current Card (Optional):</label>
                    <input type="file" id="photoUpload" accept="image/*" capture="environment">
                    <img id="photoPreview" class="camera-preview" style="display:none;">
                </div>
                <button class="btn" id="generateBtn">‚öì Generate Configuration</button>
                <button class="btn btn-secondary" id="addAssetBtn">‚ûï Add New Asset</button>
            </div>

            <div id="results" class="results">
                <div id="alertBox"></div>
                <div class="card">
                    <h3>üìã Asset Configuration Summary</h3>
                    <table class="specs-table">
                        <tr><td>Asset Number:</td><td id="displayAsset">-</td></tr>
                        <tr><td>Control Point:</td><td id="displayCP">-</td></tr>
                        <tr><td>Card Type:</td><td>WWL CS1001</td></tr>
                        <tr><td>Speed Setting:</td><td id="displaySpeed">-</td></tr>
                        <tr><td>No Load Speed:</td><td id="displayNoLoad">-</td></tr>
                        <tr><td>Sensor Timer:</td><td>4.0 S</td></tr>
                        <tr><td>Jam Timer:</td><td>4.0 S</td></tr>
                        <tr><td>Run Hold Timer:</td><td>6.0 S</td></tr>
                        <tr><td>Voltage Range:</td><td id="displayVoltage">-</td></tr>
                    </table>
                </div>
                <div id="dipSwitchCard" class="card">
                    <h3>üîå DIP Switch Configuration</h3>
                    <div id="dipSwitchConfig" class="dip-switch-container"></div>
                </div>
                <div class="card">
                    <h3>üö® LED Blink Code Troubleshooting</h3>
                    <div class="troubleshooting">
                        <h4>Error Codes by Number of Blinks:</h4>
                        <div class="blink-code"><strong>1 Blink - Photo-eye Error</strong>‚Ä¢ Clean photo eye lenses<br>‚Ä¢ Check photo eye alignment<br>‚Ä¢ Verify photo eye power and connections<br>‚Ä¢ Test photo eye operation independently</div>
                        <div class="blink-code"><strong>2 Blinks - Jam Time Error</strong>‚Ä¢ Clear any physical obstructions on conveyor<br>‚Ä¢ Check for seized rollers or bearings<br>‚Ä¢ Verify motor shaft rotates freely<br>‚Ä¢ Inspect belt tension and alignment</div>
                        <div class="blink-code"><strong>3 Blinks - Drive Roller/SZC Card Thermal Fault</strong>‚Ä¢ Check for adequate ventilation around card<br>‚Ä¢ Clean dust and debris from card and enclosure<br>‚Ä¢ Verify ambient temperature is within spec<br>‚Ä¢ Allow card to cool before restart</div>
                        <div class="blink-code"><strong>4 Blinks - Roller Thermal Fault</strong>‚Ä¢ Check motor temperature<br>‚Ä¢ Verify motor is not overloaded<br>‚Ä¢ Inspect for damaged bearings<br>‚Ä¢ Check motor connections</div>
                        <div class="blink-code"><strong>5 Blinks - Roller Lock/Over-current Fault</strong>‚Ä¢ Check for mechanical binding or obstruction<br>‚Ä¢ Verify motor is not overloaded<br>‚Ä¢ Inspect for damaged bearings or seized rollers<br>‚Ä¢ Check motor connections for shorts</div>
                        <div class="blink-code"><strong>6 Blinks - Power Low-Voltage Error</strong>‚Ä¢ Check power supply connections<br>‚Ä¢ Verify voltage at card input terminals<br>‚Ä¢ Inspect for loose or corroded connections<br>‚Ä¢ Check circuit breakers and fuses</div>
                        <div class="blink-code"><strong>7 Blinks - Slave Card Error (Master mode)</strong>‚Ä¢ Check network cable connections<br>‚Ä¢ Verify master/slave settings<br>‚Ä¢ Inspect for damaged communication cables<br>‚Ä¢ Check termination resistors</div>
                        <div class="blink-code"><strong>8 Blinks - Roller Short to Ground</strong>‚Ä¢ Check motor wiring for shorts to ground<br>‚Ä¢ Inspect cable insulation for damage<br>‚Ä¢ Test motor resistance with multimeter<br>‚Ä¢ Verify proper grounding</div>
                        <div class="blink-code"><strong>9 Blinks - Hall Sensor Fault</strong>‚Ä¢ Check hall sensor connections<br>‚Ä¢ Verify sensor alignment with motor<br>‚Ä¢ Test sensor output voltage<br>‚Ä¢ Replace sensor if damaged</div>
                    </div>
                </div>
                <div class="card">
                    <h3>‚öôÔ∏è General Troubleshooting Steps</h3>
                    <div class="alert alert-warning">
                        <strong>Before Making Changes:</strong><br>1. Document current DIP switch positions<br>2. Take photo of existing card configuration<br>3. Note any error codes or LED blink patterns<br>4. Power down equipment before adjusting switches<br><br>
                        <strong>After Configuration:</strong><br>‚Ä¢ Verify motor voltage matches card settings<br>‚Ä¢ Check all cable connections are secure<br>‚Ä¢ Test photo-eye sensors are clean and aligned<br>‚Ä¢ Verify motor rotation direction
                    </div>
                </div>
                <button class="btn" id="printBtn">üñ®Ô∏è Print Configuration</button>
            </div>
        </div>
    </div>

    <div id="addAssetModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2 style="color: #3498db; margin-bottom: 20px;">‚ûï Add New Asset</h2>
            <div class="form-group">
                <label for="newAssetNumber">Asset Number:</label>
                <input type="text" id="newAssetNumber" placeholder="e.g., 12999">
            </div>
            <div class="form-group">
                <label for="newAssetSpeed">Speed (FPM):</label>
                <input type="text" id="newAssetSpeed" placeholder="e.g., 180">
            </div>
            <div class="form-group">
                <label for="newAssetCP">Control Point:</label>
                <input type="text" id="newAssetCP" placeholder="e.g., CP12">
            </div>
            <button class="btn btn-success" id="saveAssetBtn">üíæ Save Asset</button>
            <button class="btn btn-secondary" id="downloadBtn">üì• Download All Assets (JSON)</button>
        </div>
    </div>
    <script>
const assetDatabase={"3530":180,"3430":180,"3330":180,"3230":180,"3130":180,"3476":150,"3125":150,"3225":150,"3220":150,"3320":150,"3425":150,"3420":150,"3525":150,"3520":150,"3674":180,"8281":150,"8181":150,"8255":180,"8160":180,"8155":180,"8182":150,"8282":150,"8283":150,"8286":150,"8292":150,"8288":150,"8289":150,"8186":150,"8187":150,"8188":180,"11015":180,"11025":180,"11035":180,"11045":180,"11055":180,"11065":180,"11075":180,"11085":180,"11095":180,"11105":180,"11875":180,"11115":180,"11125":180,"11905":180,"11925":180,"11915":90,"11950":90,"11955":90,"11940":90,"11935":90,"11215":180,"11220":180,"11225":180,"12504":180,"12530":180,"12532":180,"12538":180,"12542":180,"12544":180,"12546":180,"12548":180,"12552":180,"12554":180,"12558":180,"12600":180,"12604":180,"12608":180,"12610":180,"12612":180,"12614":180,"12616":180,"12622":180,"12624":180,"12630":180,"12632":180,"12634":180,"12638":180,"12640":180,"12648":180,"12654":180,"12656":180,"12658":180,"12660":180,"12662":180,"12664":180,"12670":180,"12672":180,"12678":180,"12680":180,"12688":180,"12724":180,"12726":180,"12728":180,"12730":180,"12731":120,"12732":180,"12733":120,"12734":180,"12739":180,"12741":180,"12742":180,"12744":180,"12916":180,"12920":180,"12926":180,"12928":180,"12930":180,"12936":180,"12942":180,"12946":180,"12947":180,"12948":180,"13015":180,"13025":180,"13035":180,"13045":180,"13055":180,"13065":180,"13075":180,"13085":180,"13095":180,"13105":180,"13115":180,"13125":180,"13215":180,"13220":180,"13225":180,"13875":180,"13905":180,"13915":90,"13925":180,"13935":90,"13940":90,"13950":90,"13955":90,"14504":180,"14530":180,"14532":180,"14538":180,"14542":180,"14544":180,"14546":180,"14548":180,"14552":180,"14554":180,"14558":180,"14600":180,"14604":180,"14606":180,"14608":180,"14610":180,"14612":180,"14614":180,"14616":180,"14622":180,"14624":180,"14630":180,"14632":180,"14634":180,"14638":180,"14640":180,"14648":180,"14654":180,"14656":180,"14658":180,"14660":180,"14662":180,"14664":180,"14670":180,"14672":180,"14678":180,"14680":180,"14688":180,"14724":180,"14726":180,"14728":180,"14730":180,"14731":120,"14732":180,"14733":120,"14734":180,"14739":180,"14741":180,"14742":180,"14744":180,"14916":180,"14918":180,"14920":180,"14926":180,"14928":180,"14930":180,"14936":180,"14942":180,"14946":180,"14947":180,"14948":180,"15015":180,"15025":180,"15035":180,"15045":180,"15055":180,"15065":180,"15075":180,"15085":180,"15095":180,"15105":180,"15115":180,"15125":180,"15215":180,"15220":180,"15225":180,"15875":180,"15905":180,"15915":90,"15925":180,"15935":90,"15940":90,"15950":90,"15955":90,"16504":180,"16530":180,"16532":180,"16538":180,"16542":180,"16544":180,"16546":180,"16548":180,"16552":180,"16554":180,"16558":180,"16600":180,"16604":180,"16606":180,"16608":180,"16610":180,"16612":180,"16614":180,"16616":180,"16622":180,"16624":180,"16630":180,"16632":180,"16634":180,"16638":180,"16640":180,"16648":180,"16654":180,"16656":180,"16658":180,"16660":180,"16662":180,"16664":180,"16668":180,"16670":180,"16672":180,"16678":180,"16680":180,"16724":180,"16726":180,"16728":180,"16730":180,"16731":120,"16732":180,"16733":120,"16734":180,"16739":180,"16741":180,"16742":180,"16744":180,"16818":180,"16848":180,"16916":180,"16920":180,"16926":180,"16928":180,"16930":180,"16936":180,"16942":180,"16946":180,"16947":180,"17015":180,"17025":180,"17035":180,"17045":180,"17055":180,"17065":180,"17075":180,"17085":180,"17095":180,"17105":180,"17115":180,"17125":180,"17215":180,"17220":180,"17225":180,"17875":180,"17905":180,"17915":90,"17925":180,"17935":90,"17940":90,"17950":90,"17955":90,"18504":180,"18530":180,"18532":180,"18538":180,"18544":180,"18548":180,"18552":180,"18554":180,"18558":180,"18564":180,"18600":180,"18604":180,"18606":180,"18608":180,"18610":180,"18612":180,"18614":180,"18616":180,"18622":180,"18624":180,"18630":180,"18632":180,"18634":180,"18638":180,"18640":180,"18648":180,"18654":180,"18656":180,"18658":180,"18660":180,"18662":180,"18664":180,"18670":180,"18672":180,"18678":180,"18680":180,"18688":180,"18724":180,"18726":180,"18728":180,"18730":180,"18731":120,"18732":180,"18733":120,"18734":180,"18739":180,"18741":180,"18742":180,"18744":180,"18916":180,"18918":180,"18920":180,"18926":180,"18928":180,"18930":180,"18936":180,"18942":180,"18946":180,"18947":180,"18948":180,"21085":150,"21090":150,"21095":150,"22085":150,"22090":150,"22095":150,"23085":150,"23095":150,"23100":150,"24085":150,"24090":150,"24095":150,"24100":150,"24105":150,"25005":150,"25015":150,"25020":150,"25040":150,"25045":150,"25050":150,"25060":150,"25073":150,"25083":150,"25105":150,"25115":150,"25120":150,"25125":150,"25130":150,"25135":150,"25140":180,"25305":150,"25315":150,"25320":150,"25325":150,"25340":150,"25345":150,"25350":150,"25353":150,"25355":150,"25360":150,"25373":150,"25383":150,"25405":150,"25415":150,"25420":150,"25430":150,"25435":150,"25440":180,"41830":180,"41110":180,"41116":120,"41117":120,"41118":120,"41120":120,"41612":180,"41712":180,"41714":180,"41855":180,"41140":120,"41138":120,"41137":120,"41136":120,"41142":120,"41143":120,"41632":180,"41732":180,"41601":150,"41602":150,"41604":150,"41606":150,"41608":150,"41130":180,"41726":180,"41722":150,"41724":150,"41624":150,"41622":150,"41626":180,"41628":180,"42830":180,"42110":180,"42116":120,"42117":120,"42118":120,"42120":120,"42612":180,"42712":180,"42714":180,"42855":180,"42140":120,"42138":120,"42137":120,"42136":120,"42142":120,"42143":120,"42132":180,"42732":180,"42601":150,"42602":150,"42604":150,"42606":150,"42608":150,"42130":180,"42726":180,"42722":150,"42724":150,"42624":150,"42622":150,"42626":180,"42628":180,"43830":180,"43110":180,"43116":120,"43117":120,"43118":120,"43120":120,"43612":180,"43712":180,"43714":180,"43855":180,"43140":120,"43138":120,"43137":120,"43136":120,"43142":120,"43143":120,"43132":180,"43732":180,"43601":150,"43602":150,"43604":150,"43606":150,"43608":150,"43130":180,"43726":180,"43722":150,"43724":150,"43624":150,"43622":150,"43626":180,"43628":180,"44830":180,"44110":180,"44116":120,"44117":120,"44118":120,"44120":120,"44612":180,"44712":180,"44714":180,"44855":180,"44140":120,"44138":120,"44137":120,"44136":120,"44142":120,"44143":120,"44132":180,"44732":180,"44602":150,"44604":150,"44606":150,"44608":150,"44130":180,"44726":180,"44722":150,"44724":150,"44624":150,"44622":150,"44626":180,"44628":180,"47055":150,"47355":150,"47050":150,"47045":150,"47040":150,"47350":150,"47435":150,"47430":150,"47420":150,"47425":120,"47415":120,"47030":150,"46025":180,"47020":120,"47015":120,"47115":120,"47120":150,"47125":150,"47130":150,"47135":150,"47215":120,"47220":120,"47225":150,"47235":150,"47325":150,"47330":150,"47320":150,"47315":150,"47363":150,"47360":150,"47060":150,"48055":150,"48050":150,"48047":150,"48045":150,"48042":150,"48040":150,"48255":150,"48230":150,"48225":150,"48220":150,"48215":120,"48135":150,"48130":150,"48125":150,"48120":150,"48115":120,"48030":150,"48025":150,"48020":150,"48015":120,"48063":180,"48060":150,"60125":120,"61015":150,"61125":150,"61127":150,"61145":150,"61147":150,"61160":150,"61215":150,"61305":150,"61307":150,"61309":150,"61311":150,"61313":150,"61325":150,"61327":150,"61331":150,"61333":150,"61345":150,"61347":150,"61349":150,"61353":150,"61360":150,"61415":150,"61505":150,"61507":150,"61509":150,"61511":150,"61525":150,"61527":150,"61529":150,"61531":150,"61533":150,"61547":150,"61549":150,"61560":150,"63005":150,"63010":150,"63015":150,"63025":150,"63105":150,"63110":150,"63115":150,"63125":150,"63210":150,"63215":150,"63225":150,"63310":150,"63315":150,"63325":150,"63405":150,"63410":150,"63415":150,"63425":150,"88625":120,"88630":120,"88635":120,"88640":120,"88645":120,"88650":120,"88655":120,"88660":120,"88665":120,"88670":120,"88675":120,"88680":120,"88685":120,"88690":120,"88695":120,"91015":180,"91020":180,"91025":180,"91030":180,"91035":180,"91040":180,"91075":180,"91105":180,"91201":180,"91202":180,"91203":180,"91204":180,"91205":180,"91206":180,"91301":180,"91302":180,"91303":180,"91304":180,"91306":180,"91401":180,"91501":180,"91601":60,"99005":150,"99010":150,"99015":150,"99020":150,"99025":150,"99030":150,"99035":150,"99040":150,"99045":150,"99050":150,"99055":150,"99060":150,"99065":150,"99070":150,"99075":150,"99080":150,"99085":150,"99090":150,"99095":150,"99100":150,"99105":150,"99110":150,"99115":150,"99120":150,"99125":150,"99130":150,"99135":150,"99140":150,"99145":150,"99150":150,"99155":150,"99160":150,"99165":150,"99170":150,"99175":150,"99180":150,"99185":150,"99190":150,"99195":150,"99200":150,"99205":150,"99210":150,"99215":150,"99220":150,"99225":150,"99230":150,"99235":150,"99240":150,"99245":150,"99250":150,"99255":150,"99260":150,"99265":150,"99270":150,"99275":150,"99945":180};
const configDatabase={120:{noLoadSpeed:"131.2 fpm",vinMin:"6.05 V",vinMax:"6.45 V",switches:{SW1:[{pos:1,state:"INT",label:"SPEED INT-EXT"},{pos:2,state:"OFF",label:"TIMER 1 OFF-ON"},{pos:3,state:"OFF",label:"TIMER 2 OFF-ON"},{pos:4,state:"00",label:"ZPA/IFLOW"},{pos:5,state:"MASTER",label:"MASTER/SLAVE"},{pos:6,state:"SING",label:"SING-SLUG"}],SW2:[{pos:1,state:"INT",label:"MODE INT-EOZ"},{pos:2,state:"PNP",label:"IN PNP"},{pos:3,state:"PNP",label:"EYE PNP"},{pos:4,state:"HEALTH",label:"EYE HEALTH-ALARM"},{pos:5,state:"LO",label:"EYE LO-DO"},{pos:6,state:"RUN",label:"IN STOP-RUN"}],SW3:[{pos:1,state:"PNP",label:"DIR PNP"},{pos:2,state:"CW",label:"ROTATION CW-CCW"},{pos:3,state:"PNP",label:"OUT ERR PNP"},{pos:4,state:"ON",label:"ACC DEC 1"},{pos:5,state:"OFF",label:"ACC DEC 2"},{pos:6,state:"OFF",label:"HALF SPEED"}],SW4:[{pos:1,state:"OFF",label:"SPEED 1"},{pos:2,state:"ON",label:"SPEED 2"},{pos:3,state:"ON",label:"SPEED 3"},{pos:4,state:"OFF",label:"SPEED 4"},{pos:5,state:"2ZONE",label:"LOOK AHEAD"},{pos:6,state:"PNP",label:"SYNC PNP"}]}},150:{noLoadSpeed:"163.2 fpm",vinMin:"7.55 V",vinMax:"7.96 V",switches:{SW1:[{pos:1,state:"EXT",label:"SPEED INT-EXT"},{pos:2,state:"OFF",label:"TIMER 1 OFF-ON"},{pos:3,state:"OFF",label:"TIMER 2 OFF-ON"},{pos:4,state:"00",label:"ZPA/IFLOW"},{pos:5,state:"MASTER",label:"MASTER/SLAVE"},{pos:6,state:"SING",label:"SING-SLUG"}],SW2:[{pos:1,state:"INT",label:"MODE INT-EOZ"},{pos:2,state:"PNP",label:"IN PNP"},{pos:3,state:"PNP",label:"EYE PNP"},{pos:4,state:"HEALTH",label:"EYE HEALTH-ALARM"},{pos:5,state:"LO",label:"EYE LO-DO"},{pos:6,state:"RUN",label:"IN STOP-RUN"}],SW3:[{pos:1,state:"PNP",label:"DIR PNP"},{pos:2,state:"CW",label:"ROTATION CW-CCW"},{pos:3,state:"PNP",label:"OUT ERR PNP"},{pos:4,state:"ON",label:"ACC DEC 1"},{pos:5,state:"ON",label:"ACC DEC 2"},{pos:6,state:"OFF",label:"HALF SPEED"}],SW4:[{pos:1,state:"OFF",label:"SPEED 1"},{pos:2,state:"ON",label:"SPEED 2"},{pos:3,state:"OFF",label:"SPEED 3"},{pos:4,state:"ON",label:"SPEED 4"},{pos:5,state:"2ZONE",label:"LOOK AHEAD"},{pos:6,state:"PNP",label:"SYNC PNP"}]}},180:{noLoadSpeed:"199.8 fpm",vinMin:"9.55 V",vinMax:"9.95 V",switches:{SW1:[{pos:1,state:"INT",label:"SPEED INT-EXT"},{pos:2,state:"OFF",label:"TIMER 1 OFF-ON"},{pos:3,state:"OFF",label:"TIMER 2 OFF-ON"},{pos:4,state:"00",label:"ZPA/IFLOW"},{pos:5,state:"MASTER",label:"MASTER/SLAVE"},{pos:6,state:"SING",label:"SING-SLUG"}],SW2:[{pos:1,state:"INT",label:"MODE INT-EOZ"},{pos:2,state:"PNP",label:"IN PNP"},{pos:3,state:"PNP",label:"EYE PNP"},{pos:4,state:"HEALTH",label:"EYE HEALTH-ALARM"},{pos:5,state:"LO",label:"EYE LO-DO"},{pos:6,state:"RUN",label:"IN STOP-RUN"}],SW3:[{pos:1,state:"PNP",label:"DIR PNP"},{pos:2,state:"CW",label:"ROTATION CW-CCW"},{pos:3,state:"PNP",label:"OUT ERR PNP"},{pos:4,state:"ON",label:"ACC DEC 1"},{pos:5,state:"ON",label:"ACC DEC 2"},{pos:6,state:"OFF",label:"HALF SPEED"}],SW4:[{pos:1,state:"ON",label:"SPEED 1"},{pos:2,state:"OFF",label:"SPEED 2"},{pos:3,state:"ON",label:"SPEED 3"},{pos:4,state:"ON",label:"SPEED 4"},{pos:5,state:"2ZONE",label:"LOOK AHEAD"},{pos:6,state:"PNP",label:"SYNC PNP"}]}}};
let newAssets={};
function getControlPoint(a){const p=a.substring(0,2);const m={'03':'CP03','08':'CP08','11':'CP11','12':'CP12','13':'CP13','14':'CP14','15':'CP15','16':'CP16','17':'CP17','18':'CP18','21':'CP21','22':'CP22','23':'CP23','24':'CP24','25':'CP25','41':'CP41','42':'CP42','43':'CP43','44':'CP44','47':'CP47','48':'CP48','60':'CP60','61':'CP61','63':'CP63','88':'CP99','91':'CP91','99':'CP99'};return m[p]||'Unknown';}
function showLoading(){document.getElementById('loadingOverlay').classList.add('active');}
function hideLoading(){document.getElementById('loadingOverlay').classList.remove('active');}
document.getElementById('generateBtn').addEventListener('click',function(){const a=document.getElementById('assetNumber').value.trim();if(!a){alert('Please enter an asset number');return;}showLoading();setTimeout(function(){const s=assetDatabase[a]||newAssets[a];if(!s){hideLoading();alert('Asset number not found in database.');return;}const c=configDatabase[s];const ab=document.getElementById('alertBox');if(!c){ab.innerHTML='<div class="alert alert-error"><strong>‚ö† Configuration Not Available</strong><br>DIP switch configuration for '+s+' FPM is not yet available. Currently supported speeds: 120, 150, and 180 FPM.</div>';document.getElementById('dipSwitchCard').style.display='none';}else{ab.innerHTML='<div class="alert alert-success"><strong>‚úì Configuration Generated Successfully</strong><br>Review the DIP switch settings below.</div>';document.getElementById('dipSwitchCard').style.display='block';const dc=document.getElementById('dipSwitchConfig');dc.innerHTML='';Object.keys(c.switches).forEach(sb=>{const bd=document.createElement('div');bd.className='switch-bank';bd.innerHTML='<h4>'+sb+'</h4>';c.switches[sb].forEach(sw=>{const io=sw.state!=='OFF'&&sw.state!=='00';const rd=document.createElement('div');rd.className='switch-row';rd.innerHTML='<span class="switch-position">'+sw.pos+'. '+sw.label+'</span><span class="switch-state '+(io?'switch-on':'switch-off')+'">'+sw.state+'</span>';bd.appendChild(rd);});dc.appendChild(bd);});}document.getElementById('displayAsset').textContent=a;document.getElementById('displayCP').textContent=getControlPoint(a);document.getElementById('displaySpeed').textContent=s+' FPM';document.getElementById('displayNoLoad').textContent=c?c.noLoadSpeed:'N/A';document.getElementById('displayVoltage').textContent=c?c.vinMin+' - '+c.vinMax:'N/A';document.getElementById('results').style.display='block';hideLoading();document.getElementById('results').scrollIntoView({behavior:'smooth'});},1000);});
document.getElementById('photoUpload').addEventListener('change',function(e){const f=e.target.files;if(f){const r=new FileReader();r.onload=function(ev){const p=document.getElementById('photoPreview');p.src=ev.target.result;p.style.display='block';};r.readAsDataURL(f);}});
document.getElementById('addAssetBtn').addEventListener('click',function(){document.getElementById('addAssetModal').style.display='block';});
document.getElementById('closeModal').addEventListener('click',function(){document.getElementById('addAssetModal').style.display='none';});
document.getElementById('saveAssetBtn').addEventListener('click',function(){const an=document.getElementById('newAssetNumber').value.trim();const sp=parseInt(document.getElementById('newAssetSpeed').value.trim());const cp=document.getElementById('newAssetCP').value.trim();if(!an||!sp||!cp){alert('Please fill in all fields');return;}newAssets[an]=sp;alert('Asset '+an+' added with speed '+sp+' FPM. This is stored temporarily in your browser.');document.getElementById('newAssetNumber').value='';document.getElementById('newAssetSpeed').value='';document.getElementById('newAssetCP').value='';});
document.getElementById('downloadBtn').addEventListener('click',function(){const allAssets=Object.assign({},assetDatabase,newAssets);const jsonData={metadata:{title:"SHV1 Pioneer Pirate",total:Object.keys(allAssets).length,date:new Date().toISOString()},assets:allAssets};const dataStr=JSON.stringify(jsonData,null,2);const dataBlob=new Blob([dataStr],{type:'application/json'});const url=URL.createObjectURL(dataBlob);const link=document.createElement('a');link.href=url;link.download='shv1_assets.json';link.click();URL.revokeObjectURL(url);});
document.getElementById('printBtn').addEventListener('click',function(){window.print();});
window.onclick=function(event){if(event.target==document.getElementById('addAssetModal')){document.getElementById('addAssetModal').style.display='none';}};
if('serviceWorker' in navigator){navigator.serviceWorker.register('service-worker.js').then(function(){console.log('Service Worker Registered');});}
    </script>
</body>
</html>




